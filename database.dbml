// College Data Management System (DMS) - Database Schema
// Generated: 2025-11-06
// Total Tables: 57+
// Use this file with dbdiagram.io for visualization

Project DMS {
  database_type: 'PostgreSQL'
  Note: 'College Data Management System - Comprehensive platform for managing higher education institution data'
}

// ============================================================================
// CORE COLLEGE TABLES
// ============================================================================

Table college_basic {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_id bigint [unique, not null, note: 'Business key']
  name varchar(500)
  registered_name varchar(500)
  aishe_name varchar(500)
  name_slug varchar(500)
  city varchar(255)
  state varchar(255)
  district varchar(255)
  full_address text
  campus_area varchar(100)
  total_seat varchar(100)
  affiliated_university text
  faculty_student_ratio varchar(255)
  year_of_established integer
  total_faculty_numbers varchar(100)
  website varchar(500)
  operational_status boolean [default: true]
  is_active boolean [default: true]
  latitude double
  longitude double
  new_college boolean
  visible boolean
  web_index boolean [default: true]
  on_strapi boolean
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp
  version integer [default: 1, note: 'Versioning field']
  version_created_at timestamp
  version_created_by varchar(255)
  valid_from timestamp [default: `now()`]
  valid_to timestamp [default: `'9999-12-31 23:59:59.999'`]

  Note: 'Core college information (VERSIONED)'
}

Table college_contact {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_id bigint [ref: > college_basic.college_id, note: 'FK to college_basic']
  type varchar(255) [note: 'Phone/Email/Fax/Website/Social']
  value varchar(500)
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp
  version integer [default: 1]
  version_created_at timestamp
  version_created_by varchar(255)
  valid_from timestamp [default: `now()`]
  valid_to timestamp [default: `'9999-12-31 23:59:59.999'`]

  Note: 'Multiple contact methods for colleges (VERSIONED)'
}

Table college_long_info {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_id bigint [ref: - college_basic.college_id, unique]
  overview_md text
  overview_html text
  all_courses_md text
  all_courses_html text
  fees_md text
  fees_html text
  scholarship_md text
  scholarship_html text
  campus_md text
  campus_html text
  nearby_md text
  nearby_html text
  reviews_md text
  reviews_html text
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Long-form content for college pages (Markdown → HTML)'
}

Table college_short_info {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_id bigint [ref: - college_basic.college_id, unique]
  overview_md text
  overview_html text
  all_courses_md text
  all_courses_html text
  fees_md text
  fees_html text
  scholarship_md text
  scholarship_html text
  campus_md text
  campus_html text
  nearby_md text
  nearby_html text
  reviews_md text
  reviews_html text
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Short-form content for college pages (Markdown → HTML)'
}

Table college_ranking {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_id bigint [ref: > college_basic.college_id]
  ranking_body_id bigint [ref: > ranking_body.id]
  category varchar(255)
  year integer
  rank_value varchar(100)
  is_active boolean [default: true]
  data_source text
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp
  version integer [default: 1]
  version_created_at timestamp
  version_created_by varchar(255)
  valid_from timestamp [default: `now()`]
  valid_to timestamp [default: `'9999-12-31 23:59:59.999'`]

  Note: 'College rankings from various bodies (VERSIONED)'
}

Table college_accreditation {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_id bigint [ref: > college_basic.college_id]
  accreditation_body_id bigint [ref: > accreditation_body.id]
  status varchar(255)
  grade varchar(100)
  is_active boolean [default: true]
  data_source text
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp
  version integer [default: 1]
  version_created_at timestamp
  version_created_by varchar(255)
  valid_from timestamp [default: `now()`]
  valid_to timestamp [default: `'9999-12-31 23:59:59.999'`]

  Note: 'College accreditations (VERSIONED)'
}

Table college_infrastructure {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_id bigint [ref: > college_basic.college_id]
  category varchar(255) [ref: > infrastructure_category.name]
  facility_name varchar(500)
  summary text
  is_active boolean [default: true]
  data_source text
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp
  version integer [default: 1]
  version_created_at timestamp
  version_created_by varchar(255)
  valid_from timestamp [default: `now()`]
  valid_to timestamp [default: `'9999-12-31 23:59:59.999'`]

  Note: 'College infrastructure facilities (VERSIONED)'
}

Table collaboration {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_id bigint [ref: > college_basic.college_id]
  name varchar(500) [not null]
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'College collaborations and partnerships'
}

Table popular_name {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_id bigint [ref: > college_basic.college_id]
  name varchar(500) [not null]
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Popular search names/aliases for colleges'
}

Table essential_utility {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_id bigint [ref: > college_basic.college_id]
  utility_type varchar(255)
  name varchar(500)
  distance varchar(100)
  place_type_id bigint [ref: > place_type_master.id]
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Essential utilities near campus (hospitals, banks, ATMs, police stations)'
}

Table nearby_place {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_id bigint [ref: > college_basic.college_id]
  place_type varchar(255)
  place_name varchar(500)
  about text
  distance varchar(100)
  place_type_id bigint [ref: > place_type_master.id]
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Nearby places of interest (tourist spots, markets, etc.)'
}

// ============================================================================
// DEGREE/PROGRAM TABLES
// ============================================================================

Table college_degree {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_id bigint [ref: > college_basic.college_id, not null]
  degree_name text
  course_full_name text
  standard_shortform text
  stream text [note: 'Engineering/Medical/Management/etc.']
  level text [note: 'UG/PG/Diploma/Certificate']
  domain text
  delivery_mode text [note: 'Regular/Distance/Online']
  duration_years integer
  average_tuition_fee numeric
  seats text
  lateral_entry_allowed boolean [default: false]
  specializations_applicable boolean [default: false]
  is_active boolean [default: true]
  degree_url text
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp
  version integer [default: 1]
  valid_from timestamp [default: `now()`]
  valid_to timestamp [default: `'infinity'`]

  Note: 'Academic programs offered by colleges (VERSIONED)'
}

Table degree_specialization {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_degree_id bigint [ref: > college_degree.id]
  specialization_name varchar(500)
  specialization_code varchar(100)
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Specializations within degree programs'
}

Table degree_eligibility {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_degree_id bigint [ref: > college_degree.id]
  eligibility_type varchar(50)
  eligibility_criteria text
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Eligibility criteria for degree programs'
}

Table degree_entrance_exam {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_degree_id bigint [ref: > college_degree.id]
  exam_name varchar(255)
  exam_code varchar(100)
  is_required boolean [default: false]
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Entrance exams required for degree programs'
}

// ============================================================================
// FEE & FINANCIAL AID TABLES
// ============================================================================

Table college_degree_fee_components {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_degree_id bigint [ref: > college_degree.id]
  fee_component_definition_id bigint [ref: > fee_component_definitions.id]
  amount numeric
  academic_year integer
  is_mandatory boolean [default: true]
  is_refundable boolean [default: false]
  is_one_time boolean [default: false]
  payment_frequency text
  payment_due_period integer
  is_active boolean [default: true]
  data_source text
  metadata jsonb [note: 'Contains important_notes (to be flattened)']
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp
  version integer [default: 1]
  valid_from timestamp [default: `now()`]
  valid_to timestamp [default: `'9999-12-31 23:59:59.999'`]

  Note: 'Fee components for degree programs (VERSIONED)'
}

Table scholarships {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_degree_id bigint [ref: > college_degree.id]
  name text
  scholarship_code text
  scholarship_type text
  eligibility_criteria text
  benefit_type text
  benefit_amount text
  benefit_percentage numeric
  is_active boolean [default: true]
  data_source text
  terms_and_conditions text
  important_note text
  metadata jsonb [note: 'Contains important_note (to be flattened)']
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp
  version integer [default: 1]
  valid_from timestamp [default: `now()`]
  valid_to timestamp [default: `'infinity'`]

  Note: 'Scholarships available for degree programs (VERSIONED)'
}

Table reserved_categories {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_degree_id bigint [ref: > college_degree.id]
  category_code text
  category_name varchar(255)
  reservation_percentage numeric
  reservation_seats integer
  fee_concession_amount numeric
  fee_concession_percentage numeric
  is_active boolean [default: true]
  important_notes text
  data_source text
  metadata jsonb [note: 'Contains important_notes (to be flattened)']
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Reserved category information (SC, ST, OBC, EWS, etc.)'
}

Table fee_component_definitions {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  component_code varchar(100) [unique]
  component_name varchar(255)
  category varchar(255)
  description text
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Master definitions for fee components'
}

// ============================================================================
// ACCOMMODATION & FACILITIES TABLES
// ============================================================================

Table accommodation_types {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_degree_id bigint [ref: > college_degree.id, not null]
  type_code text [not null]
  type_name varchar(255) [not null]
  description text
  academic_year text
  is_active boolean [default: true]
  is_girls_only boolean [default: false]
  minimum_amount text
  payment_due_period integer
  data_source text
  metadata jsonb [note: 'Contains important_notes (to be flattened)']
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Types of accommodation available (hostel, PG, etc.)'
}

Table accommodation_fee_breakdown {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  accommodation_type_id bigint [ref: > accommodation_types.id]
  component_name varchar(255)
  amount numeric
  payment_frequency text
  is_refundable boolean [default: false]
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Detailed fee breakdown for accommodation types'
}

Table mess_facilities {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_degree_id bigint [ref: > college_degree.id]
  academic_year text
  mess_fee decimal
  caution_money decimal
  is_active boolean [default: true]
  payment_due_period integer
  data_source text
  metadata jsonb [note: 'Contains meal_plan, available_food_options (flattened)']
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Mess facility information'
}

Table mess_meal_plan {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  mess_facilities_id bigint [ref: > mess_facilities.id, not null]
  meal_type text [not null, note: 'breakfast, lunch, dinner, snacks']
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Meal plan items (flattened from mess_facilities.metadata)'
}

Table mess_food_options {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  mess_facilities_id bigint [ref: > mess_facilities.id, not null]
  food_option text [not null, note: 'vegetarian, non_vegetarian, north_indian, etc.']
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Food options available (flattened from mess_facilities.metadata)'
}

Table pwd_accessibility {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_degree_id bigint [ref: > college_degree.id]
  is_applicable boolean [default: false]
  room_rent_exemption boolean [default: false]
  exemption_conditions text
  is_active boolean [default: true]
  data_source text
  important_notes text
  fee_relaxation_percentage text [note: 'Flattened from metadata']
  metadata jsonb [note: 'Contains academic_support, supported_disabilities (flattened)']
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'PWD (Persons with Disabilities) accessibility information'
}

Table pwd_academic_support {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  pwd_accessibility_id bigint [ref: > pwd_accessibility.id, not null]
  support_item text [not null, note: 'Scribes, extra time, assistive technologies, etc.']
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Academic support items (flattened from pwd_accessibility.metadata)'
}

Table pwd_supported_disabilities {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  pwd_accessibility_id bigint [ref: > pwd_accessibility.id, not null]
  disability_type text [not null, note: 'Visual impairment, Hearing impairment, etc.']
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Supported disability types (flattened from pwd_accessibility.metadata)'
}

Table day_schooling_options {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_degree_id bigint [ref: > college_degree.id]
  option_name varchar(255)
  description text
  is_active boolean [default: true]
  data_source text
  metadata jsonb
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Day schooling options available'
}

// ============================================================================
// SPECIALIZATION TABLES
// ============================================================================

Table specialization_overview {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  degree_specialization_id bigint [ref: > degree_specialization.id]
  overview_text text
  career_prospects text
  is_active boolean [default: true]
  metadata jsonb
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Overview information for specializations'
}

Table specialization_academic_structure {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  degree_specialization_id bigint [ref: > degree_specialization.id]
  structure_type varchar(255)
  structure_data jsonb
  is_active boolean [default: true]
  metadata jsonb
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Academic structure for specializations'
}

Table specialization_semester {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  degree_specialization_id bigint [ref: > degree_specialization.id]
  semester_number integer
  semester_name varchar(255)
  credits integer
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Semester information for specializations'
}

Table specialization_subject {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  specialization_semester_id bigint [ref: > specialization_semester.id]
  subject_name varchar(500)
  subject_code varchar(100)
  credits integer
  is_core boolean [default: false]
  is_active boolean [default: true]
  metadata jsonb
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Subjects within specialization semesters'
}

Table specialization_extraction_metadata {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  degree_specialization_id bigint [ref: > degree_specialization.id]
  academic_year text
  data_completeness text
  source_verification jsonb
  data_extraction_date text
  extraction_approach text
  notes text
  course text [note: 'Flattened from metadata']
  location text [note: 'Flattened from metadata']
  institution text [note: 'Flattened from metadata']
  specialization text [note: 'Flattened from metadata']
  is_active boolean [default: true]
  metadata jsonb
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Data extraction metadata for specializations'
}

Table specialization_matched {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  degree_specialization_id bigint [ref: > degree_specialization.id]
  matched_specialization_name varchar(500)
  match_confidence decimal
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Matched specializations for standardization'
}

// ============================================================================
// INFRASTRUCTURE TABLES
// ============================================================================

Table infrastructure_category {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  name varchar(255) [unique, not null]
  description text
  display_order integer
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Categories for infrastructure facilities'
}

Table infrastructure_bullet_point {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_infrastructure_id bigint [ref: > college_infrastructure.id]
  bullet_point_text text
  display_order integer
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Bullet points for infrastructure facilities'
}

Table infrastructure_feature {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_infrastructure_id bigint [ref: > college_infrastructure.id]
  feature_text varchar(500)
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Additional features of infrastructure'
}

// ============================================================================
// MASTER/LOOKUP TABLES
// ============================================================================

Table ranking_body {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  body_name varchar(255) [unique, not null]
  body_code varchar(100) [unique]
  full_name text
  description text
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Ranking bodies (NIRF, QS, Times, etc.)'
}

Table accreditation_body {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  body_name varchar(255) [unique, not null]
  body_code varchar(100) [unique]
  full_name text
  description text
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Accreditation bodies (NAAC, NBA, UGC, etc.)'
}

Table place_type_master {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  type_code varchar(50) [unique, not null]
  type_name varchar(100) [not null]
  description text
  category varchar(50)
  display_order integer
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Types of places (Hospital, Temple, Market, etc.)'
}

Table master_place_type {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  place_type varchar(255) [unique, not null]
  description text
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Master place type lookup'
}

Table success_practice_stage {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  stage_name varchar(255) [unique, not null]
  stage_code varchar(100) [unique]
  description text
  display_order integer
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Stages for student success practices (Orientation, Mid-Program, Pre-Placement, etc.)'
}

Table student_success_practice {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_degree_id bigint [ref: > college_degree.id]
  practice_name varchar(500)
  practice_description text
  stage_id bigint [ref: > success_practice_stage.id]
  is_active boolean [default: true]
  metadata jsonb
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Student success practices and initiatives'
}

// ============================================================================
// METADATA & CONTENT TABLES
// ============================================================================

Table extraction_metadata {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_degree_id bigint [ref: > college_degree.id]
  academic_year text
  data_completeness text
  source_verification jsonb
  data_extraction_date text
  extraction_approach text
  notes text
  metadata jsonb [note: 'Contains course, college, data_sources_used, data_recency_check']
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Data extraction metadata for degrees'
}

Table important_notes {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  notable_type varchar(100) [note: 'Polymorphic: table name']
  notable_id bigint [note: 'Polymorphic: record ID']
  note_type varchar(50) [default: 'info']
  note_text text
  data_source text
  college_id bigint [ref: > college_basic.college_id, note: 'Flattened from metadata']
  degree_name text [note: 'Flattened from metadata']
  entity_name text [note: 'Flattened from metadata']
  metadata jsonb
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Important notes across various entities (polymorphic)'
}

Table data_sources {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_degree_id bigint [ref: > college_degree.id]
  source_name text
  source_url text
  source_tier text
  reliability_score integer
  last_verified_date timestamp
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp

  Note: 'Track data source origins (Website, Manual Entry, AI Extraction, Import)'
}

Table content_analysis {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_id bigint [ref: > college_basic.college_id]
  content_type varchar(255)
  analysis_data jsonb
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Content analysis metadata'
}

Table fmc_content_tabs {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_id bigint [ref: > college_basic.college_id]
  tab_name varchar(255)
  content_md text
  content_html text
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Full Markdown Content tabs management'
}

Table fmc_content_tabs_short {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_id bigint [ref: > college_basic.college_id]
  tab_name varchar(255)
  content_md text
  content_html text
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Short form content tabs management'
}

Table tab_track {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_id bigint [ref: > college_basic.college_id]
  tab_name varchar(255)
  last_updated_at timestamp
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Track tab update timestamps'
}

Table google_places {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  college_id bigint [ref: > college_basic.college_id]
  place_id varchar(255) [unique]
  place_name varchar(500)
  place_type varchar(255)
  address text
  latitude double
  longitude double
  rating decimal
  user_ratings_total integer
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Google Places API data for colleges'
}

Table google_reviews {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  google_place_id bigint [ref: > google_places.id]
  author_name varchar(255)
  rating integer
  text text
  time timestamp
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'Google Reviews for places'
}

// ============================================================================
// USER & ACCESS MANAGEMENT TABLES
// ============================================================================

Table user {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  email varchar(255) [unique, not null]
  password_hash text [not null]
  salt text [not null]
  role_id uuid [ref: > roles.public_id, not null]
  is_active boolean [default: true]
  is_verified boolean [default: false]
  last_login_at timestamp
  password_changed_at timestamp
  failed_login_attempts integer [default: 0]
  locked_until timestamp
  created_at timestamp
  updated_at timestamp

  Note: 'System users (admin, partner, customer, AI)'
}

Table basic_profile {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  user_id bigint [ref: - user.id, unique]
  first_name varchar(255)
  last_name varchar(255)
  full_name varchar(500)
  phone varchar(50)
  phone_country_code varchar(10)
  date_of_birth date
  gender varchar(50)
  address_line1 varchar(500)
  address_line2 varchar(500)
  city varchar(255)
  state varchar(255)
  country varchar(255)
  postal_code varchar(50)
  profile_picture_url varchar(500)
  bio text
  preferences jsonb
  is_active boolean [default: true]
  created_at timestamp
  updated_at timestamp

  Note: 'User profile information'
}

Table roles {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  role_name varchar(255) [not null]
  role_code varchar(100) [unique, not null]
  description text
  permissions jsonb [note: 'Structured permission object']
  is_active boolean [default: true]
  created_at timestamp
  updated_at timestamp

  Note: 'User roles and permissions'
}

Table provider_api_key {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  provider_name varchar(255) [not null]
  api_key_hash varchar(500)
  api_key_name varchar(255)
  is_active boolean [default: true]
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'API keys for external providers'
}

Table api_key_metrics {
  id bigint [pk, increment]
  public_id uuid [unique, not null]
  api_key_hash varchar(500)
  api_key_name varchar(255)
  total_requests integer [default: 0]
  success_count integer [default: 0]
  error_count integer [default: 0]
  is_active boolean [default: true]
  cooldown_until timestamp
  last_used_at timestamp
  extra_data json
  created_by uuid [ref: > basic_profile.public_id]
  updated_by uuid [ref: > basic_profile.public_id]
  created_at timestamp
  updated_at timestamp

  Note: 'API key usage tracking and metrics'
}

// ============================================================================
// HISTORY TABLES (Auto-Generated for Versioned Tables)
// ============================================================================

Table history_college_basic {
  id bigint [pk, increment]
  public_id uuid [not null]
  college_id bigint [not null]
  name varchar(500)
  registered_name varchar(500)
  aishe_name varchar(500)
  name_slug varchar(500)
  city varchar(255)
  state varchar(255)
  district varchar(255)
  full_address text
  campus_area varchar(100)
  total_seat varchar(100)
  affiliated_university text
  faculty_student_ratio varchar(255)
  year_of_established integer
  total_faculty_numbers varchar(100)
  website varchar(500)
  operational_status boolean
  is_active boolean
  latitude double
  longitude double
  new_college boolean
  visible boolean
  web_index boolean
  on_strapi boolean
  created_by uuid
  updated_by uuid
  created_at timestamp
  updated_at timestamp
  version integer [not null]
  version_created_at timestamp
  version_created_by varchar(255)
  valid_from timestamp [not null]
  valid_to timestamp [not null]
  history_id bigint [note: 'Primary key for history table']

  Note: 'History table for college_basic (auto-generated by versioning hooks)'
}

Table history_college_contact {
  id bigint [pk, increment]
  public_id uuid [not null]
  college_id bigint [not null]
  type varchar(255)
  value varchar(500)
  is_active boolean
  created_by uuid
  updated_by uuid
  created_at timestamp
  updated_at timestamp
  version integer [not null]
  version_created_at timestamp
  version_created_by varchar(255)
  valid_from timestamp [not null]
  valid_to timestamp [not null]
  history_id bigint

  Note: 'History table for college_contact'
}

Table history_college_degree {
  id bigint [pk, increment]
  public_id uuid [not null]
  college_id bigint [not null]
  degree_name text
  course_full_name text
  standard_shortform text
  stream text
  level text
  domain text
  delivery_mode text
  duration_years integer
  average_tuition_fee numeric
  seats text
  lateral_entry_allowed boolean
  specializations_applicable boolean
  is_active boolean
  degree_url text
  created_by uuid
  updated_by uuid
  created_at timestamp
  updated_at timestamp
  version integer [not null]
  valid_from timestamp [not null]
  valid_to timestamp [not null]
  history_id bigint

  Note: 'History table for college_degree'
}

Table history_college_ranking {
  id bigint [pk, increment]
  public_id uuid [not null]
  college_id bigint [not null]
  ranking_body_id bigint
  category varchar(255)
  year integer
  rank_value varchar(100)
  is_active boolean
  data_source text
  created_by uuid
  updated_by uuid
  created_at timestamp
  updated_at timestamp
  version integer [not null]
  version_created_at timestamp
  version_created_by varchar(255)
  valid_from timestamp [not null]
  valid_to timestamp [not null]
  history_id bigint

  Note: 'History table for college_ranking'
}

Table history_college_accreditation {
  id bigint [pk, increment]
  public_id uuid [not null]
  college_id bigint [not null]
  accreditation_body_id bigint
  status varchar(255)
  grade varchar(100)
  is_active boolean
  data_source text
  created_by uuid
  updated_by uuid
  created_at timestamp
  updated_at timestamp
  version integer [not null]
  version_created_at timestamp
  version_created_by varchar(255)
  valid_from timestamp [not null]
  valid_to timestamp [not null]
  history_id bigint

  Note: 'History table for college_accreditation'
}

Table history_college_infrastructure {
  id bigint [pk, increment]
  public_id uuid [not null]
  college_id bigint [not null]
  category varchar(255)
  facility_name varchar(500)
  summary text
  is_active boolean
  data_source text
  created_by uuid
  updated_by uuid
  created_at timestamp
  updated_at timestamp
  version integer [not null]
  version_created_at timestamp
  version_created_by varchar(255)
  valid_from timestamp [not null]
  valid_to timestamp [not null]
  history_id bigint

  Note: 'History table for college_infrastructure'
}

Table history_college_degree_fee_components {
  id bigint [pk, increment]
  public_id uuid [not null]
  college_degree_id bigint [not null]
  fee_component_definition_id bigint
  amount numeric
  academic_year integer
  is_mandatory boolean
  is_refundable boolean
  is_one_time boolean
  payment_frequency text
  payment_due_period integer
  is_active boolean
  data_source text
  metadata jsonb
  created_by uuid
  updated_by uuid
  created_at timestamp
  updated_at timestamp
  version integer [not null]
  valid_from timestamp [not null]
  valid_to timestamp [not null]
  history_id bigint

  Note: 'History table for college_degree_fee_components'
}

Table history_scholarships {
  id bigint [pk, increment]
  public_id uuid [not null]
  college_degree_id bigint [not null]
  name text
  scholarship_code text
  scholarship_type text
  eligibility_criteria text
  benefit_type text
  benefit_amount text
  benefit_percentage numeric
  is_active boolean
  data_source text
  terms_and_conditions text
  important_note text
  metadata jsonb
  created_by uuid
  updated_by uuid
  created_at timestamp
  updated_at timestamp
  version integer [not null]
  valid_from timestamp [not null]
  valid_to timestamp [not null]
  history_id bigint

  Note: 'History table for scholarships'
}

// ============================================================================
// RELATIONSHIPS SUMMARY
// ============================================================================

// Core Relationships:
// college_basic (1) --> (N) college_contact
// college_basic (1) --> (N) college_degree
// college_basic (1) --> (N) college_ranking
// college_basic (1) --> (N) college_accreditation
// college_basic (1) --> (N) college_infrastructure
// college_basic (1) --> (1) college_long_info
// college_basic (1) --> (1) college_short_info
// college_basic (1) --> (N) collaboration
// college_basic (1) --> (N) popular_name
// college_basic (1) --> (N) essential_utility
// college_basic (1) --> (N) nearby_place

// Degree Relationships:
// college_degree (1) --> (N) degree_specialization
// college_degree (1) --> (N) degree_eligibility
// college_degree (1) --> (N) degree_entrance_exam
// college_degree (1) --> (N) college_degree_fee_components
// college_degree (1) --> (N) scholarships
// college_degree (1) --> (N) reserved_categories
// college_degree (1) --> (N) accommodation_types
// college_degree (1) --> (N) mess_facilities
// college_degree (1) --> (N) pwd_accessibility
// college_degree (1) --> (N) data_sources
// college_degree (1) --> (N) extraction_metadata

// Specialization Relationships:
// degree_specialization (1) --> (N) specialization_overview
// degree_specialization (1) --> (N) specialization_academic_structure
// degree_specialization (1) --> (N) specialization_semester
// degree_specialization (1) --> (N) specialization_extraction_metadata
// specialization_semester (1) --> (N) specialization_subject

// Flattened Metadata Relationships:
// pwd_accessibility (1) --> (N) pwd_academic_support
// pwd_accessibility (1) --> (N) pwd_supported_disabilities
// mess_facilities (1) --> (N) mess_meal_plan
// mess_facilities (1) --> (N) mess_food_options

// User Relationships:
// user (1) --> (1) basic_profile
// user (N) --> (1) roles
// basic_profile (1) --> (N) [created_by/updated_by in all tables]

// Polymorphic Relationships:
// important_notes (polymorphic) --> notable_type + notable_id

